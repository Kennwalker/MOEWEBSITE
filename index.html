import { useState } from "react";
import ReactPlayer from "react-player";
import { Input, Button } from "@/components/ui/input";
import { Card, CardContent } from "@/components/ui/card";

export default function IPTVPlayer() {
  const [url, setUrl] = useState("");
  const [inputUrl, setInputUrl] = useState("");
  const [channels, setChannels] = useState([
    { name: "Bein Sports 1", url: "http://example.com/stream1.m3u8" },
    { name: "Bein Sports 2", url: "http://example.com/stream2.m3u8" },
    { name: "ESPN", url: "http://example.com/stream3.m3u8" },
  ]);

  const loadChannel = (channelUrl) => {
    setUrl(channelUrl);
  };

  return (
    <div className="flex flex-col items-center p-4 bg-gray-900 text-white min-h-screen">
      <h1 className="text-3xl font-bold mb-4">MOE IPTV Player</h1>
      <Card className="w-full max-w-2xl">
        <CardContent>
          <ReactPlayer
            url={url}
            controls
            playing
            width="100%"
            height="400px"
          />
          <div className="mt-4 flex gap-2">
            <Input
              placeholder="Enter M3U8 URL"
              value={inputUrl}
              onChange={(e) => setInputUrl(e.target.value)}
            />
            <Button onClick={() => loadChannel(inputUrl)}>Load</Button>
          </div>
        </CardContent>
      </Card>

      <div className="mt-6 grid grid-cols-2 gap-4">
        {channels.map((channel, index) => (
          <Button
            key={index}
            onClick={() => loadChannel(channel.url)}
            className="w-full bg-blue-600 hover:bg-blue-700"
          >
            {channel.name}
          </Button>
        ))}
      </div>
    </div>
  );
}
